var RadarChart={g:null,draw:function(e,t,n){var r=this;var i={radius:5,w:600,h:600,factor:1,factorLegend:.85,total:4,levels:3,maxValue:1e3,radians:2*Math.PI,minDistance:50,opacityArea:.5};if(n!=undefined){for(var s in n){i[s]=n[s]}}i.maxValue=d3.max(t,function(e){return Math.max.apply(Math,e.map(function(e){return e.value}))});var o=t[0].map(function(e,t){return e.axis});total=o.length;var u=i.factor*Math.min(i.w/2,i.h/2);var a=d3.select(e).append("svg").attr("width",i.w).attr("height",i.h).append("g");for(var f=0;f<i.levels;f++){var l=i.factor*u*((f+1)/i.levels);a.selectAll(".levels").data(o).enter().append("svg:line").attr("x1",function(e,t){return l*(1-i.factor*Math.sin(t*i.radians/total))}).attr("y1",function(e,t){return l*(1-i.factor*Math.cos(t*i.radians/total))}).attr("x2",function(e,t){return l*(1-i.factor*Math.sin((t+1)*i.radians/total))}).attr("y2",function(e,t){return l*(1-i.factor*Math.cos((t+1)*i.radians/total))}).attr("class","line").style("stroke","grey").style("stroke-width","0.5px").attr("transform","translate("+(i.w/2-l)+", "+(i.h/2-l)+")");}var c=d3.scale.category10();series=0;var h=a.selectAll(".axis").data(o).enter().append("g").attr("class","axis");h.append("line").attr("x1",i.w/2).attr("y1",i.h/2).attr("x2",function(e,t){return i.w/2*(1-i.factor*Math.sin(t*i.radians/total))}).attr("y2",function(e,t){return i.h/2*(1-i.factor*Math.cos(t*i.radians/total))}).attr("class","line").style("stroke","grey").style("stroke-width","1px");h.append("text").attr("class","legend").text(function(e){return e}).style("font-family","sans-serif").style("font-size","10px").attr("transform",function(e,t){return"translate(0, -10)"}).attr("x",function(e,t){return i.w/2*(1-i.factorLegend*Math.sin(t*i.radians/total))-20*Math.sin(t*i.radians/total)}).attr("y",function(e,t){return i.h/2*(1-Math.cos(t*i.radians/total))+20*Math.cos(t*i.radians/total)});for(x in t){dataValues=[];y=t[x];d3.select(e+" g").selectAll(".nodes").data(y,function(e,t){dataValues.push([i.w/2*(1-parseFloat(Math.max(e.value,0))/i.maxValue*i.factor*Math.sin(t*i.radians/total)),i.h/2*(1-parseFloat(Math.max(e.value,0))/i.maxValue*i.factor*Math.cos(t*i.radians/total))])});dataValues.push(dataValues[0]);a.select(e+" g").selectAll(".area").data([dataValues]).enter().append("polygon").attr("class","serie"+series).style("stroke-width","2px").style("stroke",c(series)).attr("points",function(e){return e}).style("fill",function(e,t){return c(series)}).style("fill-opacity",i.opacityArea).on("mouseover",function(e){z="polygon."+d3.select(this).attr("class");a.selectAll("polygon").transition(200).style("fill-opacity",.1);a.selectAll(z).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){a.selectAll("polygon").transition(200).style("fill-opacity",i.opacityArea)});series++}series=0;for(x in t){y=t[x];d3.select(e+" g").selectAll(".nodes").data(y).enter().append("svg:circle").attr("class","serie"+series).attr("r",i.radius).attr("alt",function(e){return Math.max(e.value,0)}).attr("cx",function(e,t){dataValues.push([i.w/2*(1-parseFloat(Math.max(e.value,0))/i.maxValue*i.factor*Math.sin(t*i.radians/total)),i.h/2*(1-parseFloat(Math.max(e.value,0))/i.maxValue*i.factor*Math.cos(t*i.radians/total))]);return i.w/2*(1-Math.max(e.value,0)/i.maxValue*i.factor*Math.sin(t*i.radians/total))}).attr("cy",function(e,t){return i.h/2*(1-Math.max(e.value,0)/i.maxValue*i.factor*Math.cos(t*i.radians/total))}).attr("data-id",function(e){return e.axis}).style("fill",c(series)).style("fill-opacity",.9).on("mouseover",function(e){newX=parseFloat(d3.select(this).attr("cx"))-10;newY=parseFloat(d3.select(this).attr("cy"))-5;tooltip.attr("x",newX).attr("y",newY).text(e.value).transition(200).style("opacity",1);z="polygon."+d3.select(this).attr("class");a.selectAll("polygon").transition(200).style("fill-opacity",.1);a.selectAll(z).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){tooltip.transition(200).style("opacity",0);a.selectAll("polygon").transition(200).style("fill-opacity",i.opacityArea)}).append("svg:title").text(function(e){return Math.max(e.value,0)});series++}tooltip=a.append("text").style("opacity",0).style("font-family","sans-serif").style("font-size",13)}}